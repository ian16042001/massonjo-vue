import{q as E,g as m,c as r,o as i,a as e,e as w,p,v as f,s as V,u as k,F as h,k as N,l as A,h as M,b,t as g,x as R,m as U}from"./index-zCfoac38.js";const j={class:"grid md:grid-cols-2 gap-4"},C={key:0,class:"text-green-700"},S={__name:"ContactForm",setup(x){const l=E({name:"",phone:"",email:"",message:""}),o=m(!1),v=()=>{const d=encodeURIComponent("Demande de devis"),s=encodeURIComponent(`Nom: ${l.name}
      Téléphone: ${l.phone}
      Email: ${l.email}

      ${l.message}`);window.location.href=`mailto:massonjoetfils@gmail.com?subject=${d}&body=${s}`,o.value=!0};return(d,s)=>(i(),r("form",{onSubmit:V(v,["prevent"]),class:"card space-y-4"},[e("div",null,[s[4]||(s[4]=e("label",{class:"font-medium"},"Nom complet",-1)),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>l.name=a),required:"",class:"mt-1 w-full rounded-xl border px-3 py-2",placeholder:"Votre nom"},null,512),[[f,l.name]])]),e("div",j,[e("div",null,[s[5]||(s[5]=e("label",{class:"font-medium"},"Téléphone",-1)),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>l.phone=a),required:"",class:"mt-1 w-full rounded-xl border px-3 py-2",placeholder:"07 00 00 00 00"},null,512),[[f,l.phone]])]),e("div",null,[s[6]||(s[6]=e("label",{class:"font-medium"},"Email",-1)),p(e("input",{type:"email","onUpdate:modelValue":s[2]||(s[2]=a=>l.email=a),class:"mt-1 w-full rounded-xl border px-3 py-2",placeholder:"vous@exemple.fr"},null,512),[[f,l.email]])])]),e("div",null,[s[7]||(s[7]=e("label",{class:"font-medium"},"Message",-1)),p(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=a=>l.message=a),rows:"5",required:"",class:"mt-1 w-full rounded-xl border px-3 py-2",placeholder:"Décrivez votre besoin"},null,512),[[f,l.message]])]),s[8]||(s[8]=e("button",{class:"btn-primary"},"Envoyer la demande",-1)),o.value?(i(),r("p",C,"Merci ! Votre message est prêt à être envoyé dans votre client mail.")):w("",!0)],32))}},D={class:"flex items-center gap-1","aria-label":"Note"},$={__name:"StarRow",props:{value:{type:Number,default:0}},setup(x){const l=x,o=k(()=>Math.round(l.value||0));return(v,d)=>(i(),r("div",D,[(i(),r(h,null,N(5,s=>e("span",{key:s,class:A(s<=o.value?"text-primary":"text-gray-300")},"★",2)),64))]))}},T={class:"space-y-4"},F={class:"flex items-center justify-between"},q={key:0,class:"text-sm text-gray-600"},z={class:"inline-flex items-center gap-1"},B={class:"ml-1"},L={key:0,class:"text-gray-500"},P={key:1,class:"text-gray-500"},I={key:2,class:"space-y-4"},O={class:"flex items-start justify-between gap-4"},G={class:"font-semibold"},J={key:0,class:"text-sm text-gray-500"},W={class:"mt-3 whitespace-pre-line text-gray-800"},H={__name:"ReviewsList",setup(x){const l=m([]),o=m(!1);M(async()=>{try{const a=await fetch(`/data/reviews.json?ts=${Date.now()}`,{cache:"no-store"});let n=[];try{n=await a.json()}catch{n=[]}l.value=Array.isArray(n)?n:[]}catch(a){l.value=[],console.error("Failed to load reviews.json",a)}finally{o.value=!0}});const d=k(()=>{const a=l.value,n=Array.isArray(a)?a.length:0,u=n?a.reduce((_,y)=>_+(Number(y.rating)||0),0)/n:0;return{count:n,avg:u}}),s=a=>{if(!a)return"";const n=new Date(a);return isNaN(n.getTime())?"":n.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})};return(a,n)=>(i(),r("section",T,[e("div",F,[n[0]||(n[0]=e("h3",{class:"text-xl font-semibold"},"Avis clients",-1)),d.value.count>0?(i(),r("div",q,[e("span",z,[b($,{value:d.value.avg},null,8,["value"]),e("span",B,g(d.value.avg.toFixed(1))+"/5 · "+g(d.value.count)+" avis",1)])])):w("",!0)]),o.value?l.value.length===0?(i(),r("div",P,"Aucun avis pour le moment.")):(i(),r("div",I,[(i(!0),r(h,null,N(l.value,u=>(i(),r("article",{key:u.id||u.createdAt||Math.random(),class:"card"},[e("div",O,[e("div",null,[e("h4",G,g(u.name||"Client"),1),s(u.createdAt)?(i(),r("div",J,g(s(u.createdAt)),1)):w("",!0)]),b($,{value:Number(u.rating)||0},null,8,["value"])]),e("p",W,g(u.message),1)]))),128))])):(i(),r("div",L,"Chargement des avis…"))]))}},K={class:"grid md:grid-cols-2 gap-4"},Q={class:"grid md:grid-cols-2 gap-4"},X={style:{position:"absolute",left:"-9999px",top:"auto",width:"1px",height:"1px",overflow:"hidden"}},Y={class:"flex items-center gap-3"},Z=["disabled"],ee={key:0,class:"text-green-700"},te={key:1,class:"text-red-600"},se={__name:"ReviewForm",setup(x){const l=m(""),o=m(""),v=m(""),d=m(5),s=m(""),a=m(!1),n=m(!1),u=m(""),_=async()=>{const y=await fetch("/api/reviews.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:l.value,email:o.value,message:v.value,rating:d.value,website:s.value})});let t={};try{t=await y.json()}catch{}if(!y.ok)throw new Error((t==null?void 0:t.error)||"Echec de l’envoi");(t==null?void 0:t.ok)===!0||t&&t.id&&t.createdAt,n.value=!0,l.value="",o.value="",v.value="",d.value=5,s.value=""};return(y,t)=>(i(),r("form",{onSubmit:V(_,["prevent"]),class:"card space-y-4"},[t[11]||(t[11]=e("h3",{class:"text-xl font-semibold"},"Laisser votre avis",-1)),e("div",K,[e("div",null,[t[5]||(t[5]=e("label",{class:"font-medium"},"Nom",-1)),p(e("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>l.value=c),class:"mt-1 w-full rounded-xl border px-3 py-2",placeholder:"Votre nom"},null,512),[[f,l.value,void 0,{trim:!0}]])]),e("div",null,[t[7]||(t[7]=e("label",{class:"font-medium"},"Note",-1)),p(e("select",{"onUpdate:modelValue":t[1]||(t[1]=c=>d.value=c),class:"mt-1 w-full rounded-xl border px-3 py-2"},[...t[6]||(t[6]=[e("option",{value:5},"5 - Excellent",-1),e("option",{value:4},"4 - Très bien",-1),e("option",{value:3},"3 - Bien",-1),e("option",{value:2},"2 - Passable",-1),e("option",{value:1},"1 - À améliorer",-1)])],512),[[R,d.value,void 0,{number:!0}]])])]),e("div",Q,[e("div",null,[t[8]||(t[8]=e("label",{class:"font-medium"},"Email (facultatif)",-1)),p(e("input",{type:"email","onUpdate:modelValue":t[2]||(t[2]=c=>o.value=c),class:"mt-1 w-full rounded-xl border px-3 py-2",placeholder:"vous@exemple.fr"},null,512),[[f,o.value,void 0,{trim:!0}]])]),e("div",X,[t[9]||(t[9]=e("label",null,"Website",-1)),p(e("input",{"onUpdate:modelValue":t[3]||(t[3]=c=>s.value=c),autocomplete:"off",tabindex:"-1"},null,512),[[f,s.value]])])]),e("div",null,[t[10]||(t[10]=e("label",{class:"font-medium"},"Votre expérience",-1)),p(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=c=>v.value=c),rows:"5",class:"mt-1 w-full rounded-xl border px-3 py-2",placeholder:"Partagez votre expérience (travaux, délais, conseils, etc.)",required:""},null,512),[[f,v.value,void 0,{trim:!0}]])]),e("div",Y,[e("button",{class:"btn-primary",disabled:a.value},g(a.value?"Envoi…":"Envoyer"),9,Z),n.value?(i(),r("span",ee,"Merci ! Votre avis a été pris en compte.")):w("",!0),u.value?(i(),r("span",te,"Erreur: "+g(u.value),1)):w("",!0)])],32))}},le={class:"container grid md:grid-cols-2 gap-10"},ae={class:"container grid md:grid-cols-2 gap-10"},oe={class:"space-y-4"},re={__name:"Contact",setup(x){return(l,o)=>(i(),r(h,null,[e("div",le,[e("div",null,[o[0]||(o[0]=e("h1",{class:"text-3xl font-bold mb-3"},"Avis & Contact",-1)),o[1]||(o[1]=e("p",{class:"text-gray-700 mb-6"},"Expliquez votre besoin et recevez un devis rapidement.",-1)),b(S)]),o[2]||(o[2]=U('<div class="space-y-4"><div class="card"><h3 class="font-semibold">Téléphone</h3><a class="block mt-1 hover:underline" href="tel:+33750972601">07 50 97 26 01</a></div><div class="card"><h3 class="font-semibold">Adresse</h3><p class="mt-1">189 Rue des Moineaux, 74930 Reignier-Ésery</p><a class="btn-ghost mt-3 inline-flex" target="_blank" href="https://www.google.fr/maps/place/189+Rue+des+Moineaux,+74930+Reignier-Esery,+France"> Voir sur Google Maps </a></div></div>',1))]),e("div",ae,[e("div",null,[b(H)]),e("div",oe,[b(se)])])],64))}};export{re as default};
