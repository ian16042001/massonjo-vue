import{h as r,D as b,H as f,I as g,c as i,b as t,l as x,i as k,v as y,z as h,t as w,d as T,w as _,r as S,o as d,f as I}from"./index-DLCtBC-u.js";import{a as u}from"./api-C_gadaYi.js";const V={class:"min-h-screen bg-gray-100 flex items-center justify-center py-12 px-4"},C={class:"max-w-md w-full"},N={class:"bg-white rounded-2xl shadow-xl p-8"},j={key:0,class:"space-y-4"},z=["disabled"],A={class:"text-center text-sm text-gray-500"},B={key:1,class:"text-center"},$={__name:"AdminLogin",setup(D){const m=f(),n=g(),s=r(""),a=r(!1),l=r(!1);async function c(){const o=s.value.trim();if(o){a.value=!0;try{localStorage.setItem("adminToken",o),(await u.getStats()).data&&n.push(`/admin/dashboard/${o}`)}catch{localStorage.removeItem("adminToken"),alert("Token invalide. Veuillez rÃ©essayer.")}finally{a.value=!1}}}return b(()=>{const o=m.params.token;if(o)l.value=!0,localStorage.setItem("adminToken",o),u.getStats().then(()=>{n.push(`/admin/dashboard/${o}`)}).catch(()=>{localStorage.removeItem("adminToken"),l.value=!1,alert("Token invalide ou expirÃ©")});else{const e=localStorage.getItem("adminToken");e&&u.getStats().then(()=>{n.push(`/admin/dashboard/${e}`)}).catch(()=>{localStorage.removeItem("adminToken")})}}),(o,e)=>{const p=S("router-link");return d(),i("div",V,[t("div",C,[t("div",N,[e[5]||(e[5]=x('<div class="text-center mb-8"><div class="w-16 h-16 bg-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4"><span class="text-3xl">ğŸ”§</span></div><h1 class="text-2xl font-bold text-gray-900">AccÃ¨s Admin</h1><p class="text-gray-600 mt-2"> Massonjo Chauffage Sanitaire </p></div>',1)),l.value?(d(),i("div",B,[...e[4]||(e[4]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"},null,-1),t("p",{class:"text-gray-600"},"VÃ©rification du token...",-1)])])):(d(),i("div",j,[t("div",null,[e[1]||(e[1]=t("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Token d'accÃ¨s ",-1)),k(t("input",{"onUpdate:modelValue":e[0]||(e[0]=v=>s.value=v),type:"password",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Entrez votre token admin",onKeyup:h(c,["enter"])},null,544),[[y,s.value]])]),t("button",{onClick:c,disabled:!s.value||a.value,class:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},w(a.value?"Connexion...":"Se connecter"),9,z),t("div",A,[e[3]||(e[3]=t("p",null,"Cette page est rÃ©servÃ©e Ã  l'administrateur.",-1)),T(p,{to:"/",class:"text-blue-600 hover:underline mt-2 inline-block"},{default:_(()=>[...e[2]||(e[2]=[I(" â† Retour au site ",-1)])]),_:1})])]))])])])}}};export{$ as default};
